{% extends "base.html" %}
{% block content %}
<h2>Enter your profile</h2>
<form id="profileForm">
  Age: <input name="age" type="number"><br>
  Income: <input name="income" type="number"><br>
  Gender: <select name="gender"><option>male</option><option>female</option></select><br>
  State: <input name="state"><br>
  Occupation: <input name="occupation"><br>
  <button type="submit">Check</button>
</form>

<div id="results"></div>

<script>
document.getElementById('profileForm').onsubmit = async (e) => {
  e.preventDefault();
  const form = e.target;
  const data = {
    age: Number(form.age.value),
    income: Number(form.income.value),
    gender: form.gender.value,
    state: form.state.value,
    occupation: form.occupation.value
  };
  const res = await fetch('/api/match', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data)});
  const json = await res.json();
  document.getElementById('results').innerText = JSON.stringify(json, null, 2);
}
</script>
{% endblock %}
